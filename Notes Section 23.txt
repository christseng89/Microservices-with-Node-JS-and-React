23-512. Creating a GitHub Action ~ 513. Adding a CI Test Script
https://docs.github.com/en/github-ae@latest/actions/using-workflows/events-that-trigger-workflows

### Github => Choose Repository => Actions => Yourself
https://github.com/christseng89/Microservices-with-Node-JS-and-React/new/master?filename=.github%2Fworkflows%2Fmain.yml&workflow_template=blank

// tests.yaml
name: tests

on: pull_request

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: cd auth && npm install && npm run test:ci

### Auth
// package.json
    "test": "jest --runInBand --detectOpenHandles --watchAll --no-cache",
    "test:ci": "jest" ***

git add .
git commit -am "23-512. Creating a GitHub Action ~ 513. Adding a CI Test Script"
git pull
git push

23-514. Running Tests on PR Creation
### Auth
index.ts
const start = async () => {
  console.log('Starting up ...'); ***
  if (!process.env.JWT_KEY) {

git checkout -b dev
  Switched to a new branch 'dev'    

git commit -am "23-514. Running Tests on PR Creation #1"
git push origin dev

// tests.yaml
      - run: cd ticketing && cd auth && npm install && npm run test:ci ***
git push origin dev

### Github => Pull Requests => New Pull Request => master <- dev

23-515. Output of Failing Tests
// signin.test.ts
it('responds with a cookie when given valid credentials', async () => {
  const cookie = await global.signup();
  const response = await request(app)
    .post('/api/users/signin')
    .send({
      email: 'test@test.com',
      password: 'password'
    })
    .expect(400); ***

git commit -am "23-515. Output of Failing Tests #1"
git push origin dev

// signin.test.ts
it('responds with a cookie when given valid credentials', async () => {
  const cookie = await global.signup();
  const response = await request(app)
    .post('/api/users/signin')
    .send({
      email: 'test@test.com',
      password: 'password'
    })
    .expect(200); ***

git commit -am "23-515. Output of Failing Tests #2"
git push origin dev

### Manually create a PR (Pull Request) once.  CI will run automatically.

23-516. Running Tests in Parallel
// package.json (tickets, orders, payments)
    "test:ci": "jest" ***

// package.json (expiration)
  "scripts": {
    "start": "ts-node-dev src/index.ts"
  },

git commit -am "23-516. Running Tests in Parallel #1"
git push origin dev

### .github\workflows
ren tests.yaml => tests-auth.yaml
// tests-tickets.yaml, tests-orders.yaml, tests-payments.yaml (new)
