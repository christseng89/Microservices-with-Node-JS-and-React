17-350. Scaffolding the Orders Service
cd ticketing
md orders
cd orders
md src

### copy files/folder from ticketing\tickets to ticketing\orders
copy ..\tickets\.dockerignore
copy ..\tickets\Dockerfile
copy ..\tickets\package.json
copy ..\tickets\tsconfig.json

copy ..\tickets\src\index.ts src\index.ts
copy ..\tickets\src\app.ts src\app.ts
copy ..\tickets\src\nats-wrapper.ts src\nats-wrapper.ts

npm i

// Build image - orders
minikube image build -t christseng89/orders .
  Sending build context to Docker daemon  414.2kB
  Step 1/6 : FROM node:16-alpine
  16-alpine: Pulling from library/node
  2408cc74d12b: Already exists
  fdd104a55e88: Already exists
  58c2dfb7c32f: Already exists
  ...

minikube image push christseng89/orders  
minikube image ls | grep orders
  docker.io/christseng89/orders:latest

17-351. A Touch More Setup & 352. Ingress Routing Rules
// orders-depl.yaml, orders-mongo-depl.yaml (new)

// skaffold.yaml
  - image: christseng89/orders ***
    # - image: us.gcr.io/ticketing-com-353405/orders
    context: orders
    docker:
      dockerfile: Dockerfile
    sync:
      manual:
    ...    

// ingress-srv.yaml
  - path: /api/orders/?(.*)
    pathType: Prefix
    backend:
      service:
        name: orders-srv
        port:
          number: 3000                  
  - path: /?(.*)
    pathType: Prefix
  ...

cd ticketing
skaffold dev
